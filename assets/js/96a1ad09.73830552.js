"use strict";(self.webpackChunkgefyra=self.webpackChunkgefyra||[]).push([[723],{3905:(e,t,r)=>{r.d(t,{Zo:()=>c,kt:()=>m});var n=r(7294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var s=n.createContext({}),p=function(e){var t=n.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):l(l({},t),e)),r},c=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},u="mdxType",k={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),u=p(r),d=a,m=u["".concat(s,".").concat(d)]||u[d]||k[d]||o;return r?n.createElement(m,l(l({ref:t},c),{},{components:r})):n.createElement(m,l({ref:t},c))}));function m(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=r.length,l=new Array(o);l[0]=d;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[u]="string"==typeof e?e:a,l[1]=i;for(var p=2;p<o;p++)l[p]=r[p];return n.createElement.apply(null,l)}return n.createElement.apply(null,r)}d.displayName="MDXCreateElement"},5044:(e,t,r)=>{r.d(t,{ZP:()=>i});var n=r(7462),a=(r(7294),r(3905));const o={toc:[{value:"Provide us with your feedback",id:"provide-us-with-your-feedback",level:2}]},l="wrapper";function i(e){let{components:t,...r}=e;return(0,a.kt)(l,(0,n.Z)({},o,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"provide-us-with-your-feedback"},"Provide us with your feedback"),(0,a.kt)("p",null,"Did everything work as expected? How was the experience of using Gefyra?\nWe'd appreciate if you could take 2 minutes of your time to fill out our ",(0,a.kt)("a",{parentName:"p",href:"https://forms.gle/AWT9NparpTVk8E978"},"feedback form"),"."))}i.isMDXComponent=!0},1529:(e,t,r)=>{r.d(t,{ZP:()=>i});var n=r(7462),a=(r(7294),r(3905));const o={toc:[{value:"Running Gefyra",id:"running-gefyra",level:2},{value:"Cleaning up",id:"cleaning-up",level:2}]},l="wrapper";function i(e){let{components:t,...r}=e;return(0,a.kt)(l,(0,n.Z)({},o,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"running-gefyra"},"Running Gefyra"),(0,a.kt)("div",null,r.hideUp?"":(0,a.kt)("div",null,(0,a.kt)("ol",{start:4},(0,a.kt)("li",{parentName:"ol"},"Set up Gefyra with ")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"gefyra up\n")))),(0,a.kt)("ol",{start:5},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Run a local Docker image with Gefyra in order to  make it part of the cluster."),(0,a.kt)("ol",{parentName:"li"},(0,a.kt)("li",{parentName:"ol"},"Build your Docker image with a local tag, for example from the testing directory:\n",(0,a.kt)("inlineCode",{parentName:"li"},"cd testing/images/ && docker build -f Dockerfile.local . -t pyserver")),(0,a.kt)("li",{parentName:"ol"},"Execute Gefyra's run command:    ",(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"gefyra run -i pyserver -N mypyserver -n default\n"))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("em",{parentName:"li"},"exec")," into the running container and look around. You will find the container to run within your Kubernetes cluster.  ",(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"docker exec -it mypyserver bash\n")),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"wget -O- hello-nginx\n")),"will print out the website of the cluster service ",(0,a.kt)("em",{parentName:"li"},"hello-nginx")," from within the cluster."))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Create a bridge in order to intercept the traffic to the cluster application with the one running locally:    "))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"gefyra bridge -N mypyserver -n default --port 8000:80 --target deploy/hello-nginxdemo/hello-nginx\n")),(0,a.kt)("p",null,"Check out the locally running server comes up under: ",(0,a.kt)("a",{parentName:"p",href:"http://hello.127.0.0.1.nip.io:8080/"},"http://hello.127.0.0.1.nip.io:8080/"),"  "),(0,a.kt)("ol",{start:7},(0,a.kt)("li",{parentName:"ol"},"List all running ",(0,a.kt)("em",{parentName:"li"},"bridges"),":  ")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"gefyra list --bridges\n")),(0,a.kt)("ol",{start:8},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("em",{parentName:"li"},"Unbridge")," the local container and reset the cluster to its original state: ")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"gefyra unbridge -N mypybridge\n")),(0,a.kt)("p",null,"Check out the initial response from: ",(0,a.kt)("a",{parentName:"p",href:"http://hello.127.0.0.1.nip.io:8080/"},"http://hello.127.0.0.1.nip.io:8080/"),"  "),(0,a.kt)("h2",{id:"cleaning-up"},"Cleaning up"),(0,a.kt)("ol",{start:9},(0,a.kt)("li",{parentName:"ol"},"Remove Gefyra's components from the cluster with ")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"gefyra down\n")))}i.isMDXComponent=!0},6783:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>m,frontMatter:()=>i,metadata:()=>p,toc:()=>u});var n=r(7462),a=(r(7294),r(3905)),o=r(1529),l=r(5044);const i={layout:"page",title:"Docker Desktop Kubernetes (OSX)",permalink:"/getting-started/docker-desktop-kubernetes-osx/",nav_order:3,parent:"Getting Started"},s="Getting started with Gefyra and Docker Desktop Kubernetes on MacOS",p={unversionedId:"getting-started/docker_desktop_osx",id:"getting-started/docker_desktop_osx",title:"Docker Desktop Kubernetes (OSX)",description:"This example is really similar to the k3d getting started guide.",source:"@site/docs/getting-started/docker_desktop_osx.mdx",sourceDirName:"getting-started",slug:"/getting-started/docker_desktop_osx",permalink:"/docs/getting-started/docker_desktop_osx",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/getting-started/docker_desktop_osx.mdx",tags:[],version:"current",frontMatter:{layout:"page",title:"Docker Desktop Kubernetes (OSX)",permalink:"/getting-started/docker-desktop-kubernetes-osx/",nav_order:3,parent:"Getting Started"},sidebar:"docsSidebar",previous:{title:"kind",permalink:"/docs/getting-started/kind"},next:{title:"Google Cloud Platform (GCP)",permalink:"/docs/getting-started/gcp"}},c={},u=[{value:"Prerequisites",id:"prerequisites",level:2}],k={toc:u},d="wrapper";function m(e){let{components:t,...r}=e;return(0,a.kt)(d,(0,n.Z)({},k,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"getting-started-with-gefyra-and-docker-desktop-kubernetes-on-macos"},"Getting started with Gefyra and Docker Desktop Kubernetes on MacOS"),(0,a.kt)("p",null,"This example is really similar to the k3d getting started guide.\nHowever, Docker Desktop's Kubernetes comes with some specialities\nwhich must be taken care of to make this guide work."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Try out our ",(0,a.kt)("a",{parentName:"strong",href:"/docs/docker-extension/"},"Docker Desktop Extension"),"!")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Note:")," Gefyra works the same for different Kubernetes distributions.\nDocker Desktop doesn't come with an ingress installed which must\nbe added to the cluster to get things working."),(0,a.kt)("p",null,"You can easily try Gefyra yourself following this small example."),(0,a.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Follow the ",(0,a.kt)("a",{parentName:"p",href:"https://gefyra.dev/installation"},"installation")," for MacOS.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Start the Kubernetes cluster that comes with Docker Desktop. This may take moment."))),(0,a.kt)("div",{align:"center"},(0,a.kt)("img",{src:"/img/getting_started_docker_desktop_kubernetes.png",alt:"docker desktop kubernetes settings"})),(0,a.kt)("ol",{start:3},(0,a.kt)("li",{parentName:"ol"},"Tell kubectl to use your docker-desktop cluster:")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"kubectl config use-context docker-desktop\n")),(0,a.kt)("ol",{start:4},(0,a.kt)("li",{parentName:"ol"},"Install an ingress to enable routing for the cluster. For this guide we use the nginx\ningress controller like this:")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"kubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/controller-v1.2.1/deploy/static/provider/cloud/deploy.yaml\n")),(0,a.kt)("ol",{start:5},(0,a.kt)("li",{parentName:"ol"},"Now patch the nginx ingress controller service to make port ",(0,a.kt)("inlineCode",{parentName:"li"},"8080")," available:")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},'kubectl patch svc -n ingress-nginx ingress-nginx-controller -p \'{"spec": {"ports": [{"appProtocol": "http", "name": "http", "port": 8080, "protocol": "TCP", "targetPort": "http"}]}}\' --type merge\n')),(0,a.kt)("ol",{start:6},(0,a.kt)("li",{parentName:"ol"},"Apply some workload, for example from the testing directory of this repo:  ")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"kubectl apply -f https://raw.githubusercontent.com/gefyrahq/gefyra/main/testing/workloads/hello_dd.yaml\n")),(0,a.kt)("p",null,"Check out this workload running under: ",(0,a.kt)("a",{parentName:"p",href:"http://hello.127.0.0.1.nip.io:8080/"},"http://hello.127.0.0.1.nip.io:8080/"),"    "),(0,a.kt)("ol",{start:7},(0,a.kt)("li",{parentName:"ol"},"Set up Gefyra with the following command:")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"For Docker Desktop <4.16.x:")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"gefyra up\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"For Docker Desktop >=4.16.x:")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"gefyra up --host=kubernetes.docker.internal\n")),(0,a.kt)(o.ZP,{hideUp:!0,mdxType:"GettingStartedCommon"}),(0,a.kt)(l.ZP,{mdxType:"Feedback"}))}m.isMDXComponent=!0}}]);